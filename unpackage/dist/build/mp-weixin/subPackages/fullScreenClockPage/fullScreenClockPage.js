"use strict";const e=require("../../common/vendor.js"),t=require("../../store/index.js");function n(){let e=new Date;return("00"+e.getHours()).slice(-2)+("00"+e.getMinutes()).slice(-2)+("00"+e.getSeconds()).slice(-2)}const s={data:()=>({canvasWidth:t.store.getters.screenWidth,timeStr:n(),timeRunner:"",isShowCanvas:!1,touchNum:0}),computed:{timeArr(){return[...this.timeStr].map(((e,t)=>{let n;return!0&t?n=9:0==t?n=2:(2==t||4==t)&&(n=5),{max:n,current:Number(e)}}))}},mounted(){e.index.showModal({title:"提示",content:"双击界面切换时间形态，长按界面返回主页。",showCancel:!1,success:function(e){e.confirm?console.log("用户点击确定"):e.cancel&&console.log("用户点击取消")}}),this.setTimeRunner(),e.index.setKeepScreenOn({keepScreenOn:!0})},beforeDestroy(){clearInterval(this.timeRunner)},methods:{handleReturn(){e.index.navigateBack()},handleShowClock(){this.isShowCanvas=!this.isShowCanvas,this.isShowCanvas?this.drawClock():this.setTimeRunner()},maskTouchend(e){this.touchNum++;let t=this;setTimeout((()=>{this.touchNum>=2&&t.handleShowClock(),this.touchNum=0}),250)},setTimeRunner(){this.timeRunner=setInterval((()=>{this.timeStr=n()}),1e3)},drawClock(){const t=e.index.createCanvasContext("clock",this);this.timeRunner=setInterval((()=>{this.drawCanvas(t,this.canvasWidth),t.draw()}),1e3)},drawCanvas(e,t){const n=t/2,s=t/2,a=t/2-5;e.save(),e.translate(n,s),e.rotate(Math.PI/2),e.translate(-n,-s),e.setLineWidth(.02*t),e.setStrokeStyle("#000"),e.beginPath(),e.arc(n,s,a,0,2*Math.PI,!1),e.stroke();const o=new Date,i=o.getHours(),r=o.getMinutes(),h=o.getSeconds(),c=(i+r/60+h/3600)*(Math.PI/6);e.setLineWidth(.02*t),e.setStrokeStyle("#000"),e.beginPath(),e.moveTo(n-Math.sin(c)*(.05*a),s+Math.cos(c)*(.05*a)),e.lineTo(n+Math.sin(c)*(.5*a),s-Math.cos(c)*(.5*a)),e.stroke();const l=(r+h/60)*(Math.PI/30);e.setLineWidth(.01*t),e.setStrokeStyle("#000"),e.beginPath(),e.moveTo(n-Math.sin(l)*(.08*a),s+Math.cos(l)*(.08*a)),e.lineTo(n+Math.sin(l)*(.8*a),s-Math.cos(l)*(.8*a)),e.stroke();const u=h*(Math.PI/30);e.setLineWidth(.003*t+1),e.setStrokeStyle("#F58212"),e.beginPath(),e.moveTo(n-Math.sin(u)*(.12*a),s+Math.cos(u)*(.12*a)),e.lineTo(n+Math.sin(u)*(.9*a),s-Math.cos(u)*(.9*a)),e.stroke(),e.beginPath(),e.arc(n,s,.015*t,0,2*Math.PI),e.setFillStyle("#F58212"),e.fill(),e.save(),e.translate(n,s);const d=Math.PI/30;e.setStrokeStyle("#000");for(let m=0;m<60;m++)m%5==0?(e.setLineWidth(.01*t),e.beginPath(),e.moveTo(0,.93*-a),e.lineTo(0,.98*-a)):(e.setLineWidth(.005*t),e.beginPath(),e.moveTo(0,.96*-a),e.lineTo(0,.98*-a)),e.stroke(),e.rotate(d);e.restore()}}};const a=e._export_sfc(s,[["render",function(t,n,s,a,o,i){return e.e({a:o.isShowCanvas},o.isShowCanvas?{b:o.canvasWidth+"px",c:o.canvasWidth+"px",d:e.o(((...e)=>i.maskTouchend&&i.maskTouchend(...e))),e:e.o(((...e)=>i.handleReturn&&i.handleReturn(...e)))}:{f:e.f(i.timeArr,((t,n,s)=>({a:e.f(t.max+1,((n,s,a)=>({a:e.t(s),b:e.t(s),c:s,d:t.current==s?1:"",e:t.current-1==s||s==t.max&&0==t.current?1:""}))),b:n}))),g:e.o(((...e)=>i.maskTouchend&&i.maskTouchend(...e))),h:e.o(((...e)=>i.handleReturn&&i.handleReturn(...e)))})}],["__scopeId","data-v-c464eb15"]]);wx.createPage(a);
