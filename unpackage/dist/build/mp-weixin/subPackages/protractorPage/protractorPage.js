"use strict";const e=require("../../common/vendor.js"),t={onShareAppMessage(){},onShareTimeline(){},data:()=>({isShowCamera:!1,ctx1:null,ctx:null,screenHeight:0,screenWidth:0,degree:0,isReverseDirection:!1}),onReady(){this.handleGetSysInfo()},methods:{handleReturn(){e.index.navigateBack()},handleCamera(){this.isShowCamera=!this.isShowCamera,this.handleGetSysInfo()},handleReverseDirection(){this.isReverseDirection=!this.isReverseDirection,this.ctx1.draw(!1),this.ctx.draw(!1),this.ctx.draw(!1),this.drawRoundImage(this.screenHeight,this.ctx1)},handleGetSysInfo(){let t=this;e.index.getSystemInfo({success:function(s){const i=e.index.createCanvasContext("myCanvas"),a=e.index.createCanvasContext("myCanvas2");t.ctx1=i,t.ctx=a,t.screenHeight=s.screenHeight,t.screenWidth=s.screenWidth,t.drawRoundImage(s.screenHeight,i)}})},calculatePointerAngle(e,t,s){const i=e.touches[0].x-t,a=e.touches[0].y-s,n=Math.atan2(a,i);this.degree=(180*n/Math.PI+90).toFixed(2)},drawPointerLine(e,t,s,i){const a=t.touches[0].x-s,n=t.touches[0].y-i,r=Math.atan2(n,a);this.screenWidth;const h=this.screenWidth,o=s+Math.cos(r)*h,c=i+Math.sin(r)*h;e.beginPath(),e.moveTo(s,i),e.lineTo(o,c),e.setStrokeStyle("#333333"),e.stroke(),e.draw()},touchstart(e){let t=this.screenHeight/2;if(this.screenHeight/2>this.screenWidth&&(t=this.screenWidth),this.calculatePointerAngle(e,10,t),this.drawPointerLine(this.ctx,e,10,t),this.ctx.translate(30,t-20),this.ctx.rotate(Math.PI/2),this.ctx.setFontSize(20),this.isReverseDirection){let e=(180-this.degree).toFixed(2);this.ctx.fillText(e+"°",0,0)}else this.ctx.fillText(this.degree+"°",0,0);this.ctx.setTransform(1,0,0,1,0,0)},drawRoundImage(e,t){e/2>this.screenWidth&&(e=2*this.screenWidth),t.beginPath(),t.arc(10,e/2,e/2-50,90*Math.PI/180,270*Math.PI/180,!0),t.lineTo(10,e-50),t.setStrokeStyle("#333333"),t.stroke(),t.closePath();const s=e/2,i=e/2-10,a=e/2-50,n=e/2-85;for(let r=0;r<=180;r+=1){let e=10;r%5==0&&(e=15),r%10!=0&&0!=r||(e=20);const h=r*Math.PI/180-Math.PI/2,o=10+Math.cos(h)*(a-e),c=s+Math.sin(h)*(a-e),d=10+Math.cos(h)*a,l=s+Math.sin(h)*a,x=10+Math.cos(h)*n,u=i+Math.sin(h)*n;r%10!=0&&0!=r||(t.setFontSize(12),t.translate(x,u),t.rotate(Math.PI/2),this.isReverseDirection?t.fillText(180-r,0,0):t.fillText(r,0,0),t.setTransform(1,0,0,1,0,0)),t.beginPath(),t.moveTo(o,c),t.lineTo(d,l),t.setStrokeStyle("#333333"),t.stroke(),t.closePath()}t.restore(),t.draw()}}};const s=e._export_sfc(t,[["render",function(t,s,i,a,n,r){return e.e({a:e.t(n.isShowCamera?"关闭相机":"打开相机"),b:e.o(((...e)=>r.handleCamera&&r.handleCamera(...e))),c:e.o(((...e)=>r.handleReverseDirection&&r.handleReverseDirection(...e))),d:e.o(((...e)=>r.handleReturn&&r.handleReturn(...e))),e:n.isShowCamera},n.isShowCamera?{f:e.o(((...e)=>t.error&&t.error(...e)))}:{},{g:e.o(((...e)=>r.touchstart&&r.touchstart(...e))),h:e.o(((...e)=>r.touchstart&&r.touchstart(...e)))})}]]);t.__runtimeHooks=6,wx.createPage(s);
